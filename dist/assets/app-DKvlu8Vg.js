var e,t,s,n=Object.defineProperty,r=e=>{throw TypeError(e)},o=(e,t,s)=>((e,t,s)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),c=(e,t,s)=>(((e,t,s)=>{t.has(e)||r("Cannot "+s)})(e,t,"access private method"),s);class i{constructor(){o(this,"_observers",[])}run(){throw new Error("Page not implemented")}disconnect(){this._observers.forEach((e=>e.disconnect()))}}const a=e=>{e.classList.add("customElement");const t=e.querySelector(".name");if(!t)return;const s=t.cloneNode(!0);s.style.opacity=0,s.style.whiteSpace="nowrap",s.style.width="fit-content",s.style.minWidth="90%",t.parentElement.append(s);let n=parseFloat(window.getComputedStyle(t).getPropertyValue("font-size"));for(;(t.clientWidth<s.clientWidth||t.clientHeight>s.clientHeight)&&n>=1;)n-=1,s.style.fontSize=n+"px",t.style.fontSize=n+"px";s.remove()};class d extends i{run(){const e=new MutationObserver((e=>{!function(){console.log("updateFullCardPreview()");const e=document.getElementById("card-properties");if(!e)return;a(e)}();const t=document.getElementById("cardsList");if(!t)return;const s=window.ty.fullCardsListIndex.nid;t.querySelectorAll("#card-list-container .card:not(.customElement)").forEach((e=>{const t=document.createElement("div");t.classList.add("properties"),e.append(t),e.classList.add("customElement"),e.classList.add("visible");const n=s[e.getAttribute("data-cardid")];n&&(e.classList.contains("hero")||l("cost",n,t),(e.classList.contains("hero")||e.classList.contains("unit")||e.classList.contains("equip"))&&l("atk",n,t,!0),(e.classList.contains("hero")||e.classList.contains("unit"))&&l("health",n,t),e.classList.contains("equip")&&l("dur",n,t),l("source",n,t),l("reqSource",n,t))}))})),t=document.getElementById("wrapper");e.observe(t,{childList:!0,subtree:!0}),this._observers.push(e)}}function l(e,t,s,n=!1){if(void 0===t[e])return null;const r=document.createElement("div");if(!n&&null===t[e])return;const o=t[e]||0;r.setAttribute("data-name",e),r.setAttribute("data-value",o+""),r.classList.add("property"),r.classList.add("mainProperty"),r.innerText=o,s.append(r)}class u extends i{run(){const e=new MutationObserver((()=>{const e=document.getElementById("libraryCards");e&&(e.querySelector(".customSelect")||document.querySelectorAll("#libraryCards .card").forEach((e=>{e.classList.add("visible")})))})),t=document.getElementById("wrapper");e.observe(t,{childList:!0,subtree:!0}),this._observers.push(e)}}class m extends i{run(){const e=new MutationObserver((e=>{const t=document.getElementById("marketContainer");if(!t)return;if(t.querySelector(".customElement"))return;const s=document.createElement("a"),n=window.ty.dulst.subdomain;s.href=`/${n}/sets`,s.classList.add("customElement"),s.innerHTML="Sets",t.querySelector("header.page menu.secondaryMenu").append(s)})),t=document.getElementById("wrapper");e.observe(t,{childList:!0,subtree:!0}),this._observers.push(e)}}class h extends i{constructor(){var t,s,n;super(...arguments),t=this,(s=e).has(t)?r("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n)}run(){const n=document.getElementById("wrapper"),r=new MutationObserver((()=>{const n=document.getElementById("setsContainer");n&&(n.querySelector(".customElement")||(c(this,e,t).call(this,n),c(this,e,s).call(this)))}));r.observe(n,{childList:!0,subtree:!0}),this._observers.push(r);new MutationObserver((()=>{const t=document.getElementById("dulstMenu");t&&(t.querySelector(".customElement")||c(this,e,s).call(this))})).observe(n,{childList:!0,subtree:!0})}}let p;e=new WeakSet,t=function(e){const t=e.querySelector("header.page menu.secondaryMenu a:first-child"),s=window.ty.dulst.subdomain;t.href=`/${s}/market`,t.classList.add("customElement"),t.innerHTML="Card Packs"},s=function(){document.querySelector("#header li.market").classList.add("active")};const y=new class extends i{run(){const e=document.querySelector(".card-info-container.popup:not(.customElement)");if(!e)return void console.error("cardInfoContainer was not found");const t=new MutationObserver((()=>{a(e)}));t.observe(e,{childList:!0}),this._observers.push(t),console.log("fullCardInfoObserver started")}};function b(e){e.includes("/cards")&&(p=new d),e.includes("/decks")&&(p=new u),e.includes("/market")&&(p=new m),e.includes("/sets")&&(p=new h),p&&p.run()}window.navigation.addEventListener("navigate",(e=>{p&&p.disconnect(),p=null,b(e.destination.url)})),b(window.location.href),y.run();
